<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>代理开证</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
		<link rel="stylesheet" href="lib/all.css" />
		<link rel="stylesheet" href="lib/css.css" />
		<link rel="stylesheet" href="lib/zepto.mdatetimer.css" />
		<style>
			body{
				background: #f3f5fe;
				font-size: 0.24rem;
			}
            .icons{
		background: url(./images/date.png) no-repeat;
		background-size:100% 100%; 
	}

	.jeinpbox{
		float: left;
		width: 3rem;
		margin-right: 0px;
		display: inline-block;
		vertical-align: middle;
		position: relative;
	}
	.jeinput{
		display: block;
		width: 100%;
		padding-left: .1rem; 
		height: .5rem;
		line-height: .36rem;
		border: 1px solid #e6e6e6;
		background-color: #fff;
		border-radius: 3px;
	}
	.jebtns{
		width: .5rem;
		margin-left: 5px; 
		margin-left: 3px;
		height: .6rem;
		line-height: 1;
		border: 1px solid #e6e6e6;
		background-color: #fff;
		border-radius: 3px;
		background-position:right center;
		float: left;
		cursor: pointer;
	}

#fullbg { 
background-color:gray; 
left:0; 
opacity:0.5; 
position:absolute; 
top:0; 
z-index:3; 
filter:alpha(opacity=50); 
-moz-opacity:0.5; 
-khtml-opacity:0.5; 
} 
#dialog { 
background-color:#fff; 
border:5px solid rgba(0,0,0, 0.4); 
height:400px; 
left:50%; 
margin:-200px 0 0 -200px; 
padding:1px; 
position:fixed !important; /* 浮动对话框 */ 
position:absolute; 
top:50%; 
width:400px; 
z-index:5; 
border-radius:5px; 
display:none; 
} 
#dialog p { 
margin:0 0 12px; 
height:24px; 
line-height:24px; 
background:#CCCCCC; 
} 
#dialog p.close { 
text-align:right; 
padding-right:10px; 
} 
#dialog p.close a { 
color:#fff; 
text-decoration:none; 
} 

			.info{
				margin-top: 0.2rem;
			}
			.goods-commodity-select{
				overflow: hidden;
			}
			.goods-commodity-select-type,.goods-commodity-select-name{
				width: 1.8rem;
				float: left;
				height: 0.68rem;
				line-height: 0.68rem;				
			}
			.goods-commodity-select-type>select,.goods-commodity-select-name>select{
				width: 100%;
				height: 0.68rem;
				background: #F3F5FE;
				/*color: #cdcccd;*/
				outline: none;
				border: none;
				font-size: 0.28rem;
				
			}
			.goods-commodity-select-name{
				width: 3.1rem;
				float: right;
			}
			.goodsin{
				overflow: hidden;
				color: #CDCCCD;
			}
			.goodsin>div:first-of-type{
				float: left;
				width: 4rem;
				height: 0.68rem;
				line-height: 0.68rem;
			}
			.goodsin>div:first-of-type>input{
				height: 0.68rem;
				width: 100%;
				border: none;
				outline: none;
				/*color: #CDCCCD;*/
			}
			.goodsin>div:last-of-type{
				float: right;
			}
			.info-date-select>div>select{
				width: 30%;
				height: 0.62rem;
				line-height: 0.62rem;
				border-radius: 0.08rem;
				border: none;
				outline: none;
				background: #f3f5fe;
				font-size: 0.24rem;
				color: #CDCCCD;
				padding-left: 0.2rem;
			}
			.wordtitle{
				height: 0.68rem !important;
				word-break: break-word !important;
				line-height: 0.32rem;
			}
			.pps{
				margin-top: 0.2rem;
			}
			.other{
				margin-top: 0.2rem;
				margin-bottom: 0.82rem;
				padding-left: 0;
			}
			.other>div>div:first-of-type{
				padding-left: 0.42rem;
			}
			.green{
				border-left: 0.06rem solid #01dbc5;
				padding-left: 0.36rem !important;
				
			}
			.justsentence{
				width: 100% !important;
			}
			.other-ir>div:first-of-type{
				width: 52% !important;
			}
			.other-ir>div:last-of-type{
				width: 46% !important;
			}
			.other-sign>div:first-of-type{
				width: 36% !important;
			}
			.other-sign>div:last-of-type{
				width: 62% !important;
			}
			.other-dp>div:first-of-type{
				width: 1.76rem !important;
			}
			.allowed>div:first-of-type{
				width: 36% !important;
			}
			.allowed>div:last-of-type{
				width: 62% !important;
			}
			.allowed>div:last-of-type>div{
				float: left;
				margin-right: 0.34rem;
			}
			.allowed>div:last-of-type>div>span{
				vertical-align: middle;
			}
			.allowed>div:last-of-type>div>span:first-of-type{
				display: inline-block;		
				width: 0.44rem;
				height: 0.44rem;
				background-size: 0.44rem 0.44rem;
				margin-right: 0.2rem;
			}
			.dealno{
				background: url(images/3.png) no-repeat center center;				
			}
			.dealyes{
				background: url(images/1.png) no-repeat center center;
			}
			.other-prpe{
				height: auto !important;
			}
			.other-prpe>div:first-of-type{
				width: 36% !important;
			}
			.other-prpe>div:last-of-type{
				width: 62% !important;
				height: auto !important;
			}
			.other-prpe input{
				width: 1.68rem;
				height: 0.68rem;
				line-height: 0.68rem;
				border: none;
				border-bottom: 1px solid #f3f5fe;
				vertical-align: middle;
				margin: 0 0.14rem;
			}
		</style>
		<script type="text/javascript" src="lib/jquery-2.2.4.min.js" ></script>
		<script type="text/javascript" src="lib/jquery.jedate.min.js"></script>
        <link rel="stylesheet" type="text/css" href="lib/jedate.css">
		<script type="text/javascript" src="lib/selfFit.js" ></script>
		<script src="lib/common.js"></script>
		<!-- <script src="lib/zepto.js"></script>
		<script src="lib/zepto.mdatetimer.js"></script> -->
		<script type="text/javascript" src="lib/YMDClass.js" ></script>
		<script type="text/javascript" src="lib/succorfai.js" ></script>
		<script type="text/javascript" src="lib/arg-1.3.min.js"></script>
	</head>
	<body>
		 <!-- <div id="fullbg"></div> 
		 <div id="dialog"> 
                  <p class="close"><a href="#" onclick="theCommonFn.closeBg();">关闭</a></p> 
                  <img src="images/4.png" id="result-pic" />
                  <div>申请已提交！</div> 
         </div>  -->
           <!--成功窗口-->
        <div id="result-success"> 
			<div class="result-bg"></div>
			<div class="result-show">
			     <div>
			     	<img src="images/4.png" id="result-pic" />
			     </div>
			     <div>
			     	<!--<p id="result-fail">失败原因——申请提交失败！</p>-->
			     	<p id="result-in">申请已提交！</p>
			     </div>
			</div>
		</div>

		 <!--失败窗口-->
        <div id="result-error"> 
			<div class="result-bg"></div>
			<div class="result-showfail">
			     <div>
			     	<img src="images/5.png" id="result-pic" />
			     </div>
			     <div>
			     	<p id="result-in">失败原因——申请提交失败！</p>
			     </div>
			</div>
		</div>
		<div class="info cell">
			<div class="info-country">
				<div>Buyer</div>
				<div class="info-country-select">
					<select id="buyerCells">
						<option>Please select...</option>
					</select>
				</div>
			</div>
			<div class="info-currency">
				<div>Currency</div>
				<div class="info-currency-select">
					<select id ="currencyCells">
						<option data-id= '1'>$</option>
						<!--<option>1</option>
						<option>2</option>
						<option>3</option>-->
					</select>
				</div>
			</div>
			<div class="info-unit">
				<div>Unit</div>
				<div class="info-unit-select">
					<select>
						<option>kg</option>
						<!--<option>1</option>
						<option>2</option>
						<option>3</option>-->
					</select>
				</div>
			</div>
			<!--<div class="info-port">
				<div>交货港口</div>
				<div class="info-port-select">
					<select id="portCells">
						<option>请选择交货港口</option>
					</select>
				</div>
			</div>-->
			<div class="info-contract">
				<div>Contract No</div>
				<div class="info-contract-in rightinput">
					<input type="text" class=""/>
				</div>
			</div>
			<div class="info-date">
				<div>Date</div>
				<div class="info-date-select">
					<div>
						<select name="year"></select>
						<select name="month"></select>
						<select name="day"></select>						
					</div>					
				</div>
			</div>
			<div class="info-seller">
				<div>Seller</div>
				<div class="info-seller-select">
					<select id ="supplierCells">
						<option >选择供应商</option>
					</select>
				</div>
			</div>
		</div>
		<div class="goods">
			<div class="goods-model" style="display: none;">
				<div class="goods-box cell">
					<div class="goods-commodity">
						<div>COMMODITY:</div>
						<div class="goods-commodity-select">
							<div class="goods-commodity-select-type">
								<select id="productType">
									<option>Please select...</option>
								</select>
							</div>
							<div class="goods-commodity-select-name">
								<select id="productNames">
									<option>Please select...</option>
								</select>
							</div>
						</div>
					</div>
					<div class="goods-num">
						<div class="wordtitle">NUMBER OF CONTAINER:</div>
						<div class="goods-num-in">
							<div class="rightinput">
								<input type="text" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
						</div>
					</div>
					<div class="goods-cs">
						<div class="wordtitle">CONTAINER SIZE:</div>
						<div class="goods-cs-in goodsin">
							<select id = 'containerSize'>
								<option></option>
							</select>
						</div>
					</div>
					<div class="goods-quantity">
						<div>QUANTITY:</div>
						<div class="goods-price-in goodsin">
							<div>
								<input type="text" id="weight" onKeyup="javascript:sendWeight(this);" onKeyup="javascript:sendWeight(this);" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
							<div>kg</div>
						</div>
					</div>
					<div class="goods-unitprice">
						<div>UNIT PRICE:</div>
						<div class="goods-total-in goodsin">
							<div>
								<input type="text" id="price" onKeyup="javascript:sendPrice(this);" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
							<div>$/kg</div>
						</div>
					</div>

					 <div class="goods-total">
				         <div>AMOUNT:</div>
				         <div class="goods-total-in goodsin" id = "totalPrice">		
				         </div>
			         </div>

					<!-- <div class="goods-shipment">
						<div>Shipment</div>
						<div class="goods-total-in">
							<div>
								<input type="text" class="picktime" value="" readonly>
							</div>
						</div>
					</div> -->
						 <div class="goods-shipment">
						<div>SHIPMENT</div>
						<div class="rightinput">
	                      <div class="jewarp content jeitem" onclick="dateSelect(this)" >
		                     <div class="jeinpbox" style="width: 80%;"><input type="text" class="jeinput" id="testico" readonly></div>
		                     <div class="icons jebtns" ></div>
	                       </div>
						</div>
					</div>


					<div class="goods-delete">删除此商品</div>
				</div>
			</div>
		    <div class="good-wrap">
				<div class="goods-box cell">
					<div class="goods-commodity">
						<div>COMMODITY:</div>
						<div class="goods-commodity-select">
							<div class="goods-commodity-select-type">
								<select id = "productTypeFirst">
									<option>Please select...</option>
								</select>
							</div>
							<div class="goods-commodity-select-name">
								<select id = "productNamesFirst">
									<option>Please select...</option>
								</select>
							</div>
						</div>
					</div>
					<div class="goods-num">
						<div class="wordtitle">NUMBER OF CONTAINER:</div>
						<div class="goods-num-in">
							<div  class="rightinput">
								<input type="text" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
						</div>
					</div>
					<div class="goods-cs">
						<div class="wordtitle">CONTAINER SIZE:</div>
						<div class="goods-cs-in goodsin">
							<select id = 'containerSizeFirst'>
								<option></option>
							</select>
						</div>
					</div>
					<div class="goods-quantity">
						<div>QUANTITY:</div>
						<div class="goods-price-in goodsin">
							<div>
								<input type="text" id="weight" onKeyup="javascript:sendWeight(this);" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
							<div>kg</div>
						</div>
					</div>
					<div class="goods-unitprice">
						<div>UNIT PRICE:</div>
						<div class="goods-total-in goodsin">
							<div>
								<input type="text" id="price" onKeyup="javascript:sendPrice(this);" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}"/>
							</div>
							<div>$/kg</div>
						</div>
					</div>

					 <div class="goods-total">
				         <div>AMOUNT:</div>
				         <div class="goods-total-in goodsin" id = "totalPrice">		
				         </div>
			         </div>
					<!-- <div class="goods-shipment">
						<div>Shipment</div>
						<div class="goods-total-in">
							<div>
								<input type="text" class="picktime" id="picktime" value="" readonly>
							</div>
						</div>
					</div> -->


					 <div class="goods-shipment">
						<div>SHIPMENT:</div>
						<div class="rightinput">
	                      <div class="jewarp content jeitem" onclick="dateSelect(this)" >
		                     <div class="jeinpbox" style="width: 80%;"><input type="text" class="jeinput" id="testico" readonly></div>
		                     <div class="icons jebtns" ></div>
	                       </div>
						</div>
					</div>



				</div>
			</div>
			<div class="goods-add">
				ADD
			</div>
		</div>
		
		<div class="pps cell">
			<div class="pps-port">
				<div>PORT:</div>
				<div class="pps-port">
					<select id ="portCellsSecond">
						<option></option>
					</select>
				</div>
			</div>
			<!--<div class="pps-price">
				<div>Price Term</div>
				<div class="pps-price-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>-->
			<div class="pps-say">
				<div>SAY:</div>
				<div class="pps-say-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
		</div>
		<div class="other cell">
			<div class="other-quality">
				<div class="green">Quality</div>
				<div class="other-quality-in">
					
				</div>
			</div>
			<div class="other-ccq">
				<div class="justsentence">Container cone quality must be same with sample.</div>
			</div>
			<div class="other-u">
				<div>U%≤</div>
				<div class="other-u goodsin">
					<div>
						<input type="text" />
					</div>
					<div>%</div>
				</div>
			</div>
			<div class="other-thin">
				<div>Thin≤</div>
				<div class="other-thin goodsin">
					<div>
						<input type="text" />
					</div>
					<div>/km</div>
				</div>
			</div>
			<div class="other-neps">
				<div>Neps≤</div>
				<div class="other-u goodsin">
					<div>
						<input type="text" />
					</div>
					<div>/km</div>
				</div>
			</div>
			<div class="other-thick">
				<div>Thick≤</div>
				<div class="other-thick goodsin">
					<div>
						<input type="text" />
					</div>
					<div>%</div>
				</div>
			</div>
			<div class="other-csp">
				<div>CSP≤</div>
				<div class="other-csp goodsin">
					<div>
						<input type="text" />
					</div>
					<div>/km</div>
				</div>
			</div>
			<div class="other-twist">
				<div>Twist≤</div>
				<div class="other-twist goodsin">
					<div>
						<input type="text" />
					</div>
					<div>/m</div>
				</div>
			</div>
			<div class="other-pt">
				<div class="green">Payment Terms</div>
				<div></div>
			</div>
			<div class="other-ir">
				<div>Irrevocable tansferable L/C</div>
				<div class="other-ir-select">
					<select id = "creditCard">
						<option></option>
						<option data-id='1'>1</option>
						<option data-id='2'>2</option>
						<option>3</option>
					</select>
				</div>
			</div>
			<div class="other-for">
				<div class="justsentence">for 100% Constractvalue.The L/C shoud be opened after</div>
			</div>
			<div class="other-sign">
				<div>sign contract before</div>
				<div class="other-sign-in">
					<!-- <div>
						<input type="text" class="picktime" id="thepicktime" value="" readonly>
					</div> -->
	                      <div class="jewarp content jeitem" onclick="dateSelect(this)" >
		                     <div class="jeinpbox" style="width: 80%;"><input type="text" class="jeinput" id="testico" readonly></div>
		                     <div class="icons jebtns" ></div>
	                       </div>
				</div>
			</div>
			<div class="other-packing">
				<div class="green">Packing</div>
				<div class="other-packing-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-lp">
				<div class="green wordtitle">Loading port</div>
				<div class="other-lp-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-dp">
				<div class="green wordtitle">Destination Port</div>
				<div class="other-dp-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-remark">
				<div class="green">Remark</div>
				<div class="other-remark-in">
					
				</div>
			</div>
			<div class="other-ab">
				<div class="wordtitle">Advising Bank</div>
				<div class="other-ab-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-sa">
				<div class="wordtitle">Swift Address</div>
				<div class="other-sa-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-pars allowed">
				<div>Partial Shipment</div>
				<div>
					<div><span allow class="dealno"></span><span>Allowed</span></div>
					<div><span allow class="dealno"></span><span>Allowed</span></div>
				</div>
			</div>
			<div class="other-trsm allowed">
				<div>Transhipment</div>
				<div>
					<div><span allow class="dealno"></span><span>Allowed</span></div>
					<div><span allow class="dealno"></span><span>Allowed</span></div>
				</div>
			</div>
			<div class="other-ep">
				<div class="wordtitle">Expiry Place</div>
				<div class="other-ep-in rightinput">
					<input type="text"  class="" />
				</div>
			</div>
			<div class="other-prpe">
				<div class="wordtitle">Presentsation period</div>
				<div>
					<span>Within</span><input type="text" /><span>days after the date of shipment</span>
				</div>
			</div>
		</div>
		<!--<div class="submit agencysb">提交</div>-->
		<div class="submit agencysb2" onclick = "submitTest()">提交</div>
		
		
		<script>
			var add = $('.goods-add'),
			    foodWrap = $('.good-wrap'),
			    box = $('.goods-box'),
			    theDeal = $('.deal>span').eq(0),
			    allowed = $('.allowed');
			     mtn = theCommonFn.getMtnByUrl();
			    loginId = theCommonFn.getLoginIdByUrl(); 
			    fromType = theCommonFn.getFromTypeByUrl();
			    mobile = theCommonFn.getMobileByUrl();
                buildID = theCommonFn.getBuildIdByUrl();	
                loc = theCommonFn.getLocByUrl();
                versionID = theCommonFn.getVersionIDByUrl();

               //Buyer信息获取-初始
             $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listBuyer",
				async:true,
				data:{
					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                       var reps;
					try{
						reps = JSON.parse(rep);		
					}catch(e){
						//TODO handle the exception
					};
					// console.log(reps);
					if(reps.result){
						var str = '',
						    list = reps.content;
					    for(var i=0;i<list.length;i++){
					 		str += '<option data-id="'+list[i].id +'" >'+list[i].key+'</option>';
					// // 		suppilerWarehouse.push({
					// // 			"houseId":list[i].store_house_id,
					// // 			"houseName":list[i].store_house_name,
					// // 			"houseAddress":list[i].address
					// //		})
					// // 	};	
					// //};
					// //$('#goodsWarehouseId').append(str);
				        }
                        $('#buyerCells').append(str);
				 //        console.log('这里是测试！！！：'+ kk);
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});


  //交货港口信息获取-初始
             $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listContainerSize",
				async:true,
				data:{
					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                       var reps;
					try{
						reps = JSON.parse(rep);		
						//console.log("ldx01:"+reps);
					}catch(e){
						//TODO handle the exception
					};
					// console.log(reps);
					if(reps.result){
						var str = '',
						    list = reps.content.wharfList;
						    //console.log("ldx011:"+list);
					    for(var i=0;i<list.length;i++){
					 		str += '<option data-id="'+list[i].key +'" >'+list[i].label+'</option>';
					// // 		suppilerWarehouse.push({
					// // 			"houseId":list[i].store_house_id,
					// // 			"houseName":list[i].store_house_name,
					// // 			"houseAddress":list[i].address
					// //		})
					// // 	};	
					// //};
					// //$('#goodsWarehouseId').append(str);
				        }
                        $('#portCells').append(str);
				 //        console.log('这里是测试！！！：'+ kk);
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});

//交货港口(port)信息获取-初始
             $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listContainerSize",
				async:true,
				data:{
					_vt:'dlk_weishatest',
					loginId: 'uy4q4h8n31',
					mtn: '82cc33cf3b35bda1705428551889c787',
					//fromType:fromType,
					mobile:'true',
					buildID:'201608071700',
					loc:'zh-Hans',
					versionID:'zh-Hans&versionID=1.0.0'
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                       var reps;
					try{
						reps = JSON.parse(rep);		
						//console.log("ldx01:"+reps);
					}catch(e){
						//TODO handle the exception
					};
					// console.log(reps);
					if(reps.result){
						var str = '',
						    list = reps.content.wharfList;
						    //console.log("ldx011:"+list);
					    for(var i=0;i<list.length;i++){
					 		str += '<option data-id="'+list[i].key +'" >'+list[i].label+'</option>';
					// // 		suppilerWarehouse.push({
					// // 			"houseId":list[i].store_house_id,
					// // 			"houseName":list[i].store_house_name,
					// // 			"houseAddress":list[i].address
					// //		})
					// // 	};	
					// //};
					// //$('#goodsWarehouseId').append(str);
				        }
                        $('#portCellsSecond').append(str);
				 //        console.log('这里是测试！！！：'+ kk);
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});


 //Container Size信息获取-初始
             $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listContainerSize",
				async:true,
				data:{
					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                       var reps;
					try{
						reps = JSON.parse(rep);		
						//console.log("ldx01:"+reps);
					}catch(e){
						//TODO handle the exception
					};
					// console.log(reps);
					if(reps.result){
						var str = '',
						    list = reps.content.containerList;
						    console.log("ldx0121:"+list);
					     for(var i=0;i<list.length;i++){
					  		str += '<option data-id="'+list[i].key +'" >'+list[i].label+'</option>';
					// // // 		suppilerWarehouse.push({
					// // // 			"houseId":list[i].store_house_id,
					// // // 			"houseName":list[i].store_house_name,
					// // // 			"houseAddress":list[i].address
					// // //		})
					// // // 	};	
					// // //};
					// // //$('#goodsWarehouseId').append(str);
				         }
				         console.log("123321:"+str);
                         $('#containerSizeFirst').append(str);
                         $('#containerSize').append(str);
				 //        console.log('这里是测试！！！：'+ kk);
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});


//信用证信息获取-初始
             $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listCredit",
				async:true,
				data:{
					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                       var reps;
					try{
						reps = JSON.parse(rep);		
						//console.log("ldx01:"+reps);
					}catch(e){
						//TODO handle the exception
					};
					// console.log(reps);
					if(reps.result){
						var str = '',
						    list = reps.content;
						    console.log("ldx012132321:"+list);
					     for(var i=0;i<list.length;i++){
					  		str += '<option data-id="'+list[i].key +'" >'+list[i].label+'</option>';
				         }
                         $('#creditCard').append(str);
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});

 // //供应商信息获取-初始
 //             $.ajax({
	// 			type:"post",
	// 			url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listContainerSize",
	// 			async:true,
	// 			data:{
	// 				_vt:'dlk_weishatest',
	// 				loginId: 'uy4q4h8n31',
	// 				mtn: '82cc33cf3b35bda1705428551889c787',
	// 				//fromType:fromType,
	// 				mobile:'true',
	// 				buildID:'201608071700',
	// 				loc:'zh-Hans',
	// 				versionID:'zh-Hans&versionID=1.0.0'
	// 			},
	// 			beforeSend:function(){
	// 				//theCommonFn.waiting();
	// 			},
	// 			success:function(rep){
 //                       var reps;
	// 				try{
	// 					reps = JSON.parse(rep);		
	// 					//console.log("ldx01:"+reps);
	// 				}catch(e){
	// 					//TODO handle the exception
	// 				};
	// 				// console.log(reps);
	// 				if(reps.result){
	// 					var str = '',
	// 					    list = reps.content.containerList;
	// 					    //console.log("ldx011:"+list);
	// 				    for(var i=0;i<list.length;i++){
	// 				 		str += '<option data-id="'+list[i].key +'" >'+list[i].label+'</option>';
	// 				// // 		suppilerWarehouse.push({
	// 				// // 			"houseId":list[i].store_house_id,
	// 				// // 			"houseName":list[i].store_house_name,
	// 				// // 			"houseAddress":list[i].address
	// 				// //		})
	// 				// // 	};	
	// 				// //};
	// 				// //$('#goodsWarehouseId').append(str);
	// 			        }

	// 			       // str += '<option data-id=10 >shanghai</option>';//测试
 //                        $('#supplierCells').append(str);
	// 			 //        console.log('这里是测试！！！：'+ kk);
	// 				}
	// 			},
	// 			error:function(){
	// 				theCommonFn.alertWin('服务器出错')
	// 			}
	// 		});

           
			//选取供应商放入,并刷出商品类型
			if(localStorage.getItem('weisha_supplierName')){
				$('.info-seller-select select option').text(localStorage.getItem('weisha_supplierName'))
				var suppilerId = localStorage.getItem('weisha_supplierId');
				console.log("ldx111："+suppilerId);
				 $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listProductType2Zy",
				async:true,
				data:{
                   _vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID,
					supplier_id:suppilerId
				},
				beforeSend:function(){
					//theCommonFn.waiting();
				},
				success:function(rep){
                      var reps;
					try{
						reps = JSON.parse(rep);	
					}catch(e){
						//TODO handle the exception
					};
					if(reps.result){
						var str = '<option>Please select...</option>',
						//var str_address,
						list = reps.content;
						//console.log(suppilerAddress[0].address);
						//$('supplier-address-in').replace(suppilerAddress[0].address);

						for(var i=0;i<list.length;i++){
							str += '<option data-id="'+list[i].product_type_id +'" >'+list[i].product_type_name+'</option>'
						};
                         //console.log("str is "+str);
					   $('#productTypeFirst option').remove();//首框删除老的选择内容
					   $('#productTypeFirst').append(str);  //首框插入新的内容
                       $('#productType option').remove();//后续框删除老的选择内容
					   $('#productType').append(str);  //后续框插入新的内容
					};
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});
			};

          //首框展示
          $("#productTypeFirst").change(function() {
          	     var productTypeId = $(this).find("option:selected").attr("data-id");
          	     //console.log("productType = " +productTypeId);
          	     var suppilerId = localStorage.getItem('weisha_supplierId');
                 getProductNameList(productTypeId,suppilerId);
            });

          //日期控制

       function dateSelect(inputobj){
       	var a = $(inputobj);
       	$.jeDate(a.find("#testico"),{trigger:false,format: 'YYYY-MM-DD'})
       }
            
             //添加list同时绑定select元素用以监听
 			add.click(function(){
				var theModel = $('.goods-model').children().clone();
				theModel.appendTo(foodWrap);
                $("select").change(function() {
                	//alert("触发");
                	var firstSelect=$(this);  //产品类型选择框
                	if(firstSelect.attr("id")=='productNamesFirst'){
                	   	return;
 
                	   }
                	    if(firstSelect.attr("id")=='productNames'){
                	   	return;
                	   }
                	var productTypeId = $(this).find("option:selected").attr("data-id");
                	var secondSelect=firstSelect.parent().siblings().children(); //产品名字选择框
                	var secondSelectParent = $(this).parent().siblings().find("option");//产品名字框上级属性，用来清除使用
                	var suppilerId = localStorage.getItem('weisha_supplierId');
                     //alert("zhelishejizhongyao");
                     getProductNameListNext(secondSelect,productTypeId,secondSelectParent,suppilerId);
                    //console.log("当前窗口为："+ $(this).find("option:checked").attr("data-id"));
                     //console.log("测试窗口为："+ $(this).parent().siblings().children());
                     // $(this).parent().siblings().children().find("option:checked").append('<option data-id="'+4+'" >'+'飞机4'+'</option>');
                     //secondSelect.append('<option data-id="'+4+'" >'+'飞机5'+'</option>');
                    // $('#productNames').append('<option data-id="'+3+'" >'+'飞机3'+'</option>');  //首行插入
                 //$(this).find("option:checked").append('<option data-id="'+4+'" >'+'飞机4'+'</option>');
                 //console.log( $(this).next());
                 // console.log( "这里是：" + $(this).find("option:checked").attr("data-id"));
                 // console.log( $('#productNamesFirst').next());
             });
            });

           function getProductNameList(productTypeId,suppilerId){
                 $.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listProductByTypeId",
				async:true,
				data:{

					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID,
					productTypeId:productTypeId,
					supplier_id:suppilerId
				},
				beforeSend:function(){
				},
				success:function(rep){
					var reps;
					try{
						reps = JSON.parse(rep);	
						//console.log(rep);	
					}catch(e){
						//TODO handle the exception
					};
					if(reps.result){
						var str = '',
						    list = reps.content;
						for(var i=0;i<list.length;i++){
							str += '<option data-id="'+list[i].product_id +'" >'+list[i].product_name+'</option>'
						};
                             //str = '<option data-id="'+2+'" >'+'傻子'+'</option>';
						//$('#productNamesFirst').append('<option data-id="'+2+'" >'+'飞机'+'</option>');  //首行插入
						console.log("ldx2:"+str);
						 $('#productNamesFirst option').remove();//删除老内容
						$('#productNamesFirst').append(str);  //首行插入
						//$('#productNames').append(str);       //除了首行之外的其余行插入
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});
           }

            function getProductNameListNext(secondSelect,productTypeId,secondSelectParent,suppilerId){
 	             var secondSelectObject = secondSelect;
 	             var productTypeIdResult = productTypeId;
 	             secondSelectParentObject = secondSelectParent;
                 $.ajax({
				     type:"post",
				     url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=listProductByTypeId",
				      async:true,
				 data:{

				 	_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID,
					productTypeId:productTypeId,
					supplier_id:suppilerId
				},
				beforeSend:function(){
				},
				success:function(rep){
					var reps;
					try{
						reps = JSON.parse(rep);	
						//console.log(rep);	
					}catch(e){
						//TODO handle the exception
					};
					if(reps.result){
						var str = '',
						    list = reps.content;
						for(var i=0;i<list.length;i++){
							str += '<option data-id="'+list[i].product_id +'" >'+list[i].product_name+'</option>'
						};
						secondSelectParentObject.remove();
                        secondSelectObject.append(str);
						//$('#productNames').append(str);  
					}
				},
				error:function(){
					theCommonFn.alertWin('服务器出错')
				}
			});
           }


            //input框的监听
            $('.goods').on('focus','input',function(){
    		    $(this).css("background-color","#EDEDED");
            });
            $('.goods').on('blur','input',function(){
    		   $(this).css("background-color","#FFFFFF");
            });

             $('.cell').on('focus','input',function(){
    		    $(this).css("background-color","#EDEDED");
            });
            $('.cell').on('blur','input',function(){
    		   $(this).css("background-color","#FFFFFF");
            });

             function sendWeight(inputobj){
               	    var goodsWeight = inputobj.value;
                    var jqueryinputobj = $(inputobj);
                    var goodsPrice = jqueryinputobj.parent().parent().parent().parent().find("#price").val();
                    jqueryinputobj.closest("div[class~=cell]").find("#totalPrice").html(goodsWeight*goodsPrice);
                 }

                function sendPrice(inputobj){
               	    var goodsPrice = inputobj.value;
                    var jqueryinputobj = $(inputobj);
                    var goodsWeight = jqueryinputobj.parent().parent().parent().parent().find("#weight").val();
               	    jqueryinputobj.closest("div[class~=cell]").find("#totalPrice").html(goodsWeight*goodsPrice);
                 }

			//日期插件配置
			// var config = {
			// 	mode : 1, //时间选择器模式：1：年月日，2：年月日时分（24小时），3：年月日时分（12小时），4：年月日时分秒。默认：1
			// 	format : 2, //时间格式化方式：1：2015年06月10日 17时30分46秒，2：2015-05-10  17:30:46。默认：2
			// 	years : [2000, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021], //年份数组
			// 	nowbtn : true, //是否显示现在按钮
			// 	onOk : function(){
			// 		//alert('OK');
			// 	},  //点击确定时添加额外的执行函数 默认null
			// 	onCancel : function(){
					
			// 	}, //点击取消时添加额外的执行函数 默认null
			// };
			// $('#picktime').mdatetimer(config);
			// $('#thepicktime').mdatetimer(config);

			// add.click(function(){
			// 	var theModel = $('.goods-model').children().clone();
			// 	var picktimenum = foodWrap.find('.foodWrap').length;
			// 	//循环生成日期插件，id唯一，需重新生成
			// 	theModel.find('.picktime').attr('id','picktime'+picktimenum);
			// 	theModel.appendTo(foodWrap);
			// 	var theID = '#picktime'+picktimenum;
			// 	$(theID).mdatetimer(config);
				
			// });
			foodWrap.on('click','.goods-delete',function(){
				$(this).parent().remove();
			});

			allowed.on('click','[allow]',function(){
				if($(this).hasClass('dealno')){
					$(this).removeClass('dealno').addClass('dealyes');
				}else{
					$(this).removeClass('dealyes').addClass('dealno');
				}
			});
			new YMDselect('year','month','day');
//			succOrFai('失败');
            //选择供应商
            $('.info-seller-select').click(function(evt){
            	evt.preventDefault();
            	window.location.href = 'supplierList.html';
            });

            // function closeBg() { //关闭遮罩层
            //     $("#fullbg,#dialog").hide(); 
            // } 

            function submitTest(){
                  var product =[];
                  var finance_daikai_msg=[];
                  var suppilerid = localStorage.getItem('weisha_supplierId');
                  var suppliername = localStorage.getItem('weisha_supplierName');
                  var currency = $('#currencyCells').find("option:selected").attr("data-id");
                  var storeHouse_Id  = $('#portCells').find("option:selected").attr("data-id");  
                  var buyer = $('#buyerCells').find("option:selected").attr("data-id");

                  for(var i=0;i<$('.good-wrap').find('.goods-box').length;i++){
					var info = $('.good-wrap').find('.goods-box').eq(i);
                    console.log("hi:"+info.find('#totalPrice').html());  //$(info.find('#totalPrice')[0]).val()
					product.push({
                            "unitprice":$.trim(info.find('.goods-price-in input').val()), 
                            "weight":$.trim(info.find('.goods-total-in input').val()),
                            "productTypeName":$.trim(info.find('.goods-commodity-select-type select').val()),
                            "productClassifyId":info.find("option:selected").attr("data-id"),
                            "shipment":info.find('#picktime').val(),
                            "cabinet":$.trim(info.find('.goods-num-in input').val()),
                            "productname":$.trim(info.find('.goods-commodity-select-name select').val())
					})
					console.log(product);
				};

				finance_daikai_msg.push({
		            "Uu": $('.other').find('.other-u div input').val(),
		            "thin": $('.other').find('.other-thin div input').val(),
		            "neps": $('.other').find('.other-u div input').val(),
		            "thick": $('.other').find('.other-thick div input').val(),
                    "csp":$('.other').find('.other-csp div input').val(),
		            "twist":$('.other').find('.other-twist div input').val(),
		            "L_C":$('.other').find("option:selected").attr("data-id"),
		            //"before":$('#thepicktime').val(),//testico
		            "before":$('#testico').val(),
		            "packing":$('.other').find('.other-packing div input').val(),//other-packing-in
		            "loading_port":$('.other').find('.other-lp div input').val(),
		            "destination_port":$('.other').find('.other-dp div input').val(),
		            "advising_bank":$('.other').find('.other-ab div input').val(),
		            "swift_adress":$('.other').find('.other-sa div input').val(),
		            //"partial_shipment":"PARTIAL SHIPMENT/前1 后2 ",
		            // "transhipment":"TRANSHIPMENT/前1 后2",
		            "expiry_place":$('.other').find('.other-ep div input').val(),
		            "preparation_period":$('.other').find('.other-prpe div input').val()
				})
                 console.log(finance_daikai_msg);
            	$.ajax({
				type:"post",
				url:"https://wei.wiyarn.com/actiz/rs/b?_s=coop&_m=createCertificate",
				async:true,
				data:{


					_vt:'dlk_weishatest',
					loginId: loginId,
					mtn: mtn,
					fromType:fromType,
					mobile:mobile,
					buildID:buildID,
					loc:loc,
					versionID:versionID,
					product:product,
					finance_daikai_msg:finance_daikai_msg
				},
				success:function(rep){
					var reps;
					try{
					    reps = JSON.parse(rep);		
				    }catch(e){				
					};
					if(reps.result){
						$("#result-success").show();
					    theCommonFn.delay2('3000');
						theCommonFn.waitAndClosePrompts('1','7000');
						theCommonFn.delay2('5000');
					}else{
						$("#result-error").show();
						setTimeout("$('#result-error').hide();",3000);
					} 
				},
				error:function(){
					theCommonFn.alertWin('服务器出错');
					theCommonFn.waiting('hide');
				}
			})
            }
		</script>
	</body>
</html>


